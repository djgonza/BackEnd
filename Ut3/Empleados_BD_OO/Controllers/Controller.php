<?phpclass Controller {	private $path = "Views/";	public function run () {		if (isset($_GET["section"]) && $_GET["section"] == "insert"){			$this->insert();			exit ();		}		if (isset($_GET["section"]) && $_GET["section"] == "search"){			$this->search();			exit ();		}		if (isset($_GET["section"]) && $_GET["section"] == "balance"){			$this->balance();			exit ();		}		if (isset($_POST["insert"]) && $_POST["insert"] == "Insertar"){			$this->insert(true);			exit ();		}		if (isset($_POST["insert"]) && $_POST["insert"] == "Insertar"){			$this->insert(true);			exit ();		}		if (isset($_POST["delete"])){			$this->delete($_POST["nss"]);			exit();		}		if (isset($_POST["update"])){			$this->update($_POST["nss"]);			exit();		}  		// Default		$this->listRows ();			}	public function cleanData () {		foreach ($_POST as $key => $value) {			$_POST[$key] = htmlspecialchars($_POST[$key]);		}	}	public function createValidatorRules () {		return array(			"nombre" => array("requiered" => true),			"apellido" => array("requiered" => true),			"nss" => array("requiered" => true),			"fijo" => array("requiered" => true),			"ventasbrutas" => array("requiered" => true),			"tarifacomision" => array("min" => 2, "requiered" => true)		);	}	public function insert ($validate = false) {		// Validamos los datos		if ($validate){			// Limpiamos los datos			$this->cleanData ();			// Creamos el validador			$validator = new Validator ();			$validator->setValidatorRules ($this->createValidatorRules ());			$validator->validate ($_POST);			// Error validacion			if ($validator->isValid()){				// Creamos el empleado				$empleado = new EmpleadoPorComision($_POST["nombre"], $_POST["apellido"], $_POST["nss"], $_POST["fijo"], $_POST["ventasbrutas"], $_POST["tarifacomision"]);				// Creamos el DAO				$dao = new DaoEmpleado();				// Insertamos el empleado				$dao->insertEmpleado($empleado);				// Redirigimos a listar				$this->listRows ($msg = ["El empleado se registro con exito!"]);				return;			}		}		// Mostramos la vista		include $this->path."insert.php";			}	public function search () {		include $this->path."search.php";	}	public function listRows ($msg = []) {		$result = [];		$dao = new DaoEmpleado();		$result = $dao->listEmpleados();		include $this->path."listRows.php";	}	public function balance () {		include $this->path."balance.php";	}	public function delete ($nss) {		$dao = new DaoEmpleado();		$dao->deleteEmpleado ($nss);		$this->listRows ($msg = ["El empleado se borro con exito!"]);	}	public function update ($nss) {		include $this->path."update.php";	}}?>